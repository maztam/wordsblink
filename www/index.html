<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kata - Kata Mutiara</title>	
	<link rel="stylesheet" href="css/themes/default/jquery.mobile.structure-1.3.1.min.css" />
	<link rel="stylesheet"  href="css/themes/default/mahardika.min.css">
	<link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<script src="phonegap.js"> </script>	
	<script src="js/jquery.js"></script>
	<script type="text/javascript" src="js/json2.js"></script>	
	<script type="text/javascript" src="js/jquery.mobile-1.3.1.min.js"></script>
	<script type="text/javascript" src="js/jstorage.min.js"></script>

	
<style>
#menuboard{
position:fixed;
bottom:0;
width:100%;
height:105px;
}

#boxlistfav{
width:90%;
height:75%;
overflow:auto;
position:fixed;
font-family:tahoma;
color:white;
}

#boxlistfav h3{
color:black;
text-align:center;
width:90%;
margin:auto;
-moz-border-radius: 15px;
border-radius: 15px;
background-color:white;
padding: 10px 0 10px 0;
}

#boxlistfav hr{
  border:0;
  height:5px;
  background-color:white;
  color:white;
}

#boxlistfav ul {
  margin-left:0em; 
  padding-left:0.2em; 
  margin-bottom:1em; 
}

#boxlistfav ul li{
list-style: none;
padding-left:0px;
}

#menuboard img{
width:75px;
}



#board{
background-color:#0095FF;
}

#bantuan{
height:100%;
background-color:#1D8F1D;
font-family:tahoma;
color:white;
}

#menus{
background-color:#1152ad;
}

#favoritmenu{
background-color:#DE003F;


}

#tengah{
margin: 0 8% 0 8%;
}

#boxkata{
width:80%;
height:150px;
border:7px solid white;
border-radius: 35px;
padding:10px;
margin:auto;
color:white;
font-family:tahoma;
overflow:hidden;
}

#textbantuan{
height:80%;
overflow:auto;
}

</style>

<script>
$(document).ready(function(){


		Array.prototype.remove = function(value) {
			   this.splice(this.indexOf(value), 1);
			   return true;
		};
		
		$('#hpsfavorit').click(function(){
			$.jStorage.deleteKey("katafavorit");
			alert('Favorit Berhasil di Hapus');
		});
	
		$('#next').click(function(){
		
			$("#instruksi").css('display','none');

	       $.get('bahan.xml', function(xml) {
				var berapa = $(xml).find('kata_id').size();
				var random = Math.ceil(Math.random() * berapa);
				
				$.jStorage.set("setrandom", random);

				var katarandom = $(xml).find('kata_id[nom="'+random+'"]').find('kata').text();	

				//munculkan menu facebook dan twitter
				
				$("#socialbutton").css('display','block');
				$("#socialfb").attr('href','http://www.facebook.com/sharer.php?s=100&p[url]=http://google.com&p[title]=Kata Kata Mutiara'+
				'&p[summary]='+katarandom);

				$("#socialtwit").attr('href','https://twitter.com/share?url=http://www.google.com&text='+katarandom);				
				
				
				//This is awesome!

					$('#masukkata').fadeOut('normal', function() {

					$("#masukkata").text(katarandom);
					$('#masukkata').fadeIn('normal', function() {
						
					});
				});
					
							
				
				if($.jStorage.get("katafavorit")==null){
				
					$("#favthis").css('display','block');
					$("#nofavthis").css('display','none');	
				
				}else{
				
				var favraw2 = $.jStorage.get("katafavorit") ;
				var favarray = favraw2.toString().split(',');	

						for (var i = 0; i < favarray.length; i++) {
							//console.log("cumi "+favarray[i]+" gagak "+random);
							if(favarray[i]==random){

									$("#favthis").css('display','none');
									$("#nofavthis").css('display','block');	
								return true
							}else{
									$("#favthis").css('display','block');
									$("#nofavthis").css('display','none');	
						
							}
						}
						
				}		
							
		
		    });
			
			
	
		   
		}); 
		
		

				$("#favthis").click(function(){
					var simpanfavorit = $.jStorage.get("setrandom");
					//alert("ini favthis "+$.jStorage.get("setrandom"));
					var datafavorit = $.jStorage.get("katafavorit");
					//console.log("data fav :"+datafavorit)
						if(datafavorit==null){
							$.jStorage.set("katafavorit",simpanfavorit);
							//alert(simpanfavorit);
						}else{
							datafavorit = datafavorit+","+simpanfavorit;
							$.jStorage.deleteKey("katafavorit");
							$.jStorage.set("katafavorit",datafavorit);
						}
						
						//console.log($.jStorage.get("katafavorit"));

				$("#favthis").css('display','none');						
				$("#nofavthis").css('display','block');
											
			
				});
			
				
				$("#nofavthis").click(function(){

					var favraw3 = $.jStorage.get("katafavorit") ;
					var favarray2 = favraw3.toString().split(',');	
					
					
					favarray2.remove($.jStorage.get("setrandom").toString());
					
					//alert("ini nofav "+$.jStorage.get("setrandom"));
					
					var katacomma =  favarray2.join(',');
					var randomsimpan = $.jStorage.get("setrandom"); 
					//console.log("panda "+katacomma);
					//console.log("sapi "+$.jStorage.get("setrandom"));	
						
							$.jStorage.deleteKey("katafavorit");
							$.jStorage.set("katafavorit",katacomma);
							
					//console.log("sapi2 "+$.jStorage.get("setrandom"));
					$("#nofavthis").css('display','none');						
					$("#favthis").css('display','block');		
				});	

		 
			$('#nextimg').hover(function(){
				$(this).attr('src','image/play_hover.png');}
				,function() {
				$(this).attr('src','image/play.png');
			});

		
	$(document).delegate('#favoritmenu', 'pageshow', function () {


			$.get('bahan.xml', function(favorits) {
			var rawfavorit = $.jStorage.get("katafavorit");
			var thisfavorit = rawfavorit.toString().split(',');
			var htmltarget;
			
			htmltarget = "<ul>";
			
			for (var i = 0; i < thisfavorit.length; i++) {
			
			htmltarget += "<p>"+$(favorits).find('kata_id[nom="'+thisfavorit[i]+'"]').find('kata').text()+"</p><hr /></li>";
		
				
			}
			
			htmltarget += "</ul>";			
			$(target_favorit).html(htmltarget);
			//console.log(htmltarget);
			});
				
		
		});

		
	});	
		
		

</script>

</head>
<body>


<div data-role="page" id="menus">
	<div data-role="content">

	<div id="boxkata">
	<p id="instruksi"align="center">Tekan tombol <b>"play"</b> di bawah ini untuk memulai</p>
	<p id="masukkata" align="center"></p>

	</div>
		<p align="center"><a href="#" id="next" ><img id="nextimg" src="image/play.png" /></a></p>
		<p align="center"><a href="#" id="favthis" style="display:none;"><img src="image/no_fav.png" /></a>
		<a href="#" id="nofavthis" style="display:none;"><img src="image/yes_fav.png" /></a></p>
		<p align="center" id="socialbutton" style="display:none;"><a target="_blank" id="socialfb"><img src="image/logo_fb.png"></a>
		<a target="_blank" id="socialtwit"><img src="image/logo_twit.png"></a></p>

	</div>

	<div id="menuboard">
		<p align="center">
		<a href="#bantuan" data-transition="flip"><img src="image/icon_bantuan.png" /></a>
		<a href="#menus" data-transition="flip"><img src="image/icon_menu.png" id="tengah" /></a>
		<a href="#favoritmenu" data-transition="flip"><img src="image/icon_favorit.png" /></a>
		</p>
	</div>
</div>


<div data-role="page" id="bantuan">
<div data-role="panel" id="mypanel" data-theme="a" data-display="overlay">
    <!-- panel content goes here -->
	<h3>Kata Kata Mutiara V.01</h3>
	<p>Developed by <b>Kita Developer</b></p>
	<p>Programming : Prawira Aditama</p>
	<p>Design : Agus Benny</p>
	<p>Other Support : Firmansyah</p>
	<p>Email : maztam5@gmail.com</p>
	<a href="#mypanel" data-rel="close" data-role="button" data-inline="true" data-theme="a" data-icon="delete">Close panel</a>
</div><!-- /panel -->


	<div data-role="content" id="textbantuan">
		<h3>Laporan ?</h3>
		<p>Terima kasih sudah mendownload aplikasi ini, bila terjadi eror ataupun bug, anda bisa mengirimkan email ke 
		<a href="#mypanel" data-role="button" data-theme="a">klik me</a></p>
		<hr />
		<h3>Warning</h3>
		<p>Selalu gunakan aplikasi ini dalam Portait Screen, tidak support landscape</p>
		<hr />
		<h3>Instruksi Aplikasi</h3>
		<p>1. Pilih Opsi Menu, lalu klik tombol play untuk memunculkan kata kata mutiara secara random</p>
		<p>2. Jika anda suka dengan kata tersebut, pilih tombol favorit</p>
		<p>3. Anda juga bisa share ke media social dengan klik tombol social media</p>
		<p>4. Untuk melihat kata yag sudah terfavort, pilih menu Favorit</p
		<hr />
		<h3>Reset Tombol Favorit</h3>
		<p>Klik tombol di bawah ini untuk mereset favorit</p>
		<p><a href="#" id="hpsfavorit" data-role="button" data-theme="a">Hapus Favorit</a></p>
	</div>

	<div id="menuboard">
		<p align="center">
		<a href="#bantuan" data-transition="flip"><img src="image/icon_bantuan.png" /></a>
		<a href="#menus" data-transition="flip"><img src="image/icon_menu.png" id="tengah" /></a>
		<a href="#favoritmenu" data-transition="flip"><img src="image/icon_favorit.png" /></a>
		</p>
	</div>
</div>

<div data-role="page" id="favoritmenu">
	<div data-role="content" id="boxlistfav">
	<h3>Kata Favorit Anda</h3>
	<div id="target_favorit" >

	</div>
	</div>

	<div id="menuboard">
		<p align="center">
		<a href="#bantuan" data-transition="flip"><img src="image/icon_bantuan.png" /></a>
		<a href="#menus" data-transition="flip"><img src="image/icon_menu.png" id="tengah" /></a>
		<a href="#favoritmenu" data-transition="flip"><img src="image/icon_favorit.png" /></a>
		</p>
	</div>
</div>

</body>
</html>